{% load static %}
<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>Mon Profil ðŸ‘€ - LSM Investment Club</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <link rel="icon" href="{% static 'favicon.ico' %}" type="image/x-icon">
    <link rel="stylesheet" href="{% static 'style.css' %}">
</head>

<body>
    <header>
        <div class="header-left">
            <img src="{% static 'logo-lsmic.png' %}" alt="Logo LSMIC">
            <a href="{% url 'home' %}">LSM Investment Club</a>
        </div>
        <div class="header-right">
            <a href="#">ActualitÃ©s</a>
            <a href="/portfolio/">Portefeuille</a>
            <a href="/performance/">Performance</a>
            {% if user.is_authenticated %}
                <a href="/profile/">{{ user.username }}</a>
            {% else %}
                <a href="/login/">Login</a>
            {% endif %}
        </div>
    </header>

    <main>
        <div class="profile-card">

            <!-- COLONNE GAUCHE -->
            <div class="left">
                <p><strong>Email :</strong> {{ request.user.email }}</p>
                <p><strong>Membre depuis :</strong> {{ request.user.date_joined|date:"d/m/Y" }}</p>

                <h3>Modifier mon nom d'utilisateur</h3>
                <form method="post">
                    {% csrf_token %}
                    <input type="hidden" name="action" value="update_username">

                    <label>Nouveau nom d'utilisateur</label>
                    <input type="text" name="new_username" value="{{ request.user.username }}" required>

                    <button type="submit">Mettre Ã  jour</button>
                </form>

                <h3>PrÃ©fÃ©rences email</h3>
                <form method="post">
                    {% csrf_token %}
                    <input type="hidden" name="action" value="toggle_newsletter">

                    {% if subscribed %}
                        <p>Vous Ãªtes actuellement <strong>abonnÃ©</strong> Ã  la newsletter.</p>
                        <button type="submit" class="unsubscribe-btn">Se dÃ©sabonner</button>
                    {% else %}
                        <p>Vous n'Ãªtes pas abonnÃ© Ã  la newsletter.</p>
                        <button type="submit" class="subscribe-btn">Sâ€™abonner Ã  la newsletter</button>
                    {% endif %}
                </form>
            </div>

            <!-- COLONNE DROITE -->
            <div class="right">
                <h3>Changer mon mot de passe</h3>
                <form method="post">
                    {% csrf_token %}
                    <input type="hidden" name="action" value="change_password">

                    <label>Nouveau mot de passe</label>
                    <input type="password" name="new_password1" required>

                    <label>Confirmer</label>
                    <input type="password" name="new_password2" required>

                    <button type="submit">Changer le mot de passe</button>
                </form>
                <form action="{% url 'logout' %}" method="post">
                    {% csrf_token %}
                    <button type="submit" class="logout-btn">Se dÃ©connecter</button>
                </form>
                <form action="" method="post" style="margin-top: 20px;">
                    {% csrf_token %}
                    <input type="hidden" name="action" value="delete_account">
                    <button type="submit" style="background-color: #e53935; color: white; font-weight: 600; padding: 10px 18px; border-radius: 8px; border: none; cursor: pointer;">
                        Supprimer mon compte
                    </button>
                </form>
            </div>

        </div>
    </main>



    <footer>
        LSM Investment Club 2025 Â©. Tous droits rÃ©servÃ©s.
    </footer>

</body>
</html>